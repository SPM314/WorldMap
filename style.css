html, body { height: 100%; margin: 0; }
#map { position: absolute; inset: 120px 0 0 0; }
#controls {
  position: absolute; top: 0; left: 0; right: 0; height: 120px;
  display: grid; grid-template-rows: auto auto auto; gap: 6px;
  padding: 8px 12px; background: #ffffffcc; backdrop-filter: blur(4px);
  z-index: 1100; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  border-bottom: 1px solid #ddd;
}
#row1, #row2, #row3 { display: flex; align-items: center; gap: 12px; flex-wrap: wrap; }
#dropzone { border: 2px dashed #bbb; border-radius: 8px; padding: 8px 12px; cursor: copy; }
#dropzone.drag { border-color: #2a7; background: #2a71; }
.status { font-size: 12px; color: #444; }
.error { color: #b00020; font-weight: 600; }
.gridlabel { font: 12px/1.1 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
             color: #222; text-shadow: 0 0 2px #fff, 0 0 3px #fff; white-space: nowrap; }
#legend { display: flex; align-items: center; gap: 14px; }
.legend-item { display: inline-flex; align-items: center; gap: 6px; font-size: 12px; color: #222; }
.swatch { width: 12px; height: 12px; border-radius: 50%; border: 1px solid #0002; }
.filter { display: inline-flex; align-items: center; gap: 6px; font-size: 13px; }
#skipReport { font-size: 12px; color: #b00020; }

/* Stats Panel */
.stats-panel {
  display: flex;
  flex-direction: column;
  gap: 4px;
  font-size: 12px;
  color: #444;
  background: #f8f9fa;
  padding: 6px 10px;
  border-radius: 6px;
  border: 1px solid #e0e0e0;
}
.stats-section {
  display: flex;
  gap: 8px;
  align-items: center;
}
.stats-panel strong {
  color: #222;
}

#allUncheckedWarn {
  color: #b00020;
  font-size: 13px;
  font-weight: 600;
  margin-left: 1em;
  display: none;
}

/* Help Modal (isolated) */
#helpModal {
  display: none; position: fixed; z-index: 5000; left:0; top:0; width:100vw; height:100vh;
  background: #0006; align-items: center; justify-content: center;
}
#helpModal.active { display: flex; }
#helpContent {
  background: #fff; padding: 30px 32px 24px 22px; width: min(720px, 92vw); border-radius: 8px;
  box-shadow: 0 10px 30px rgba(0,0,0,.2);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; color:#222;
  outline: none;
}
#helpContent h2 { margin-top:0; }
#helpClose { float:right; border:none; background:#eee; padding:6px 10px; border-radius:6px; cursor:pointer; }
#helpClose:hover { background:#e0e0e0; }
#helpList p { margin:.4rem 0; }
